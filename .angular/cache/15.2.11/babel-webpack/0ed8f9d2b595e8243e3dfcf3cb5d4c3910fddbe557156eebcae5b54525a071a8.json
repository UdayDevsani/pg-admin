{"ast":null,"code":"import jsPDF from 'jspdf';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ReportService {\n  constructor(http) {\n    this.http = http;\n  }\n  getOccupancyReport() {\n    return this.http.get('/api/reports/occupancy');\n  }\n  getPaymentReport() {\n    return this.http.get('/api/reports/payment');\n  }\n  generatePDFReport(reportType, data) {\n    const doc = new jsPDF();\n    const title = `${reportType.charAt(0).toUpperCase() + reportType.slice(1)} Report`;\n    doc.text(title, 20, 10);\n    const headers = reportType === 'occupancy' ? ['ID', 'Room Number', 'Occupant Name', 'Occupancy Date'] : ['ID', 'Booking ID', 'Amount', 'Payment Date', 'Method', 'Status'];\n    const reportData = reportType === 'occupancy' ? data.map(report => [report.id, report.room_number, report.occupant_name, report.occupancy_date]) : data.map(report => [report.payment_id, report.booking_id, report.amount, report.payment_date, report.payment_method, report.status]);\n    doc.autoTable({\n      head: [headers],\n      body: reportData,\n      startY: 20\n    });\n    doc.save(`${reportType}-report.pdf`);\n  }\n  static #_ = this.ɵfac = function ReportService_Factory(t) {\n    return new (t || ReportService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ReportService,\n    factory: ReportService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"AAEA,OAAOA,KAAK,MAAM,OAAO;;;AAMzB,OAAM,MAAOC,aAAa;EACxBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvCC,kBAAkB;IAChB,OAAO,IAAI,CAACD,IAAI,CAACE,GAAG,CAAQ,wBAAwB,CAAC;EACvD;EAEAC,gBAAgB;IACd,OAAO,IAAI,CAACH,IAAI,CAACE,GAAG,CAAQ,sBAAsB,CAAC;EACrD;EAEAE,iBAAiB,CAACC,UAAkB,EAAEC,IAAW;IAC/C,MAAMC,GAAG,GAAG,IAAIV,KAAK,EAAE;IACvB,MAAMW,KAAK,GAAG,GAAGH,UAAU,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGL,UAAU,CAACM,KAAK,CAAC,CAAC,CAAC,SAAS;IAElFJ,GAAG,CAACK,IAAI,CAACJ,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;IAEvB,MAAMK,OAAO,GAAGR,UAAU,KAAK,WAAW,GACxC,CAAC,IAAI,EAAE,aAAa,EAAE,eAAe,EAAE,gBAAgB,CAAC,GACxD,CAAC,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,cAAc,EAAE,QAAQ,EAAE,QAAQ,CAAC;IAEpE,MAAMS,UAAU,GAAGT,UAAU,KAAK,WAAW,GAC3CC,IAAI,CAACS,GAAG,CAACC,MAAM,IAAI,CAACA,MAAM,CAACC,EAAE,EAAED,MAAM,CAACE,WAAW,EAAEF,MAAM,CAACG,aAAa,EAAEH,MAAM,CAACI,cAAc,CAAC,CAAC,GAChGd,IAAI,CAACS,GAAG,CAACC,MAAM,IAAI,CAACA,MAAM,CAACK,UAAU,EAAEL,MAAM,CAACM,UAAU,EAAEN,MAAM,CAACO,MAAM,EAAEP,MAAM,CAACQ,YAAY,EAAER,MAAM,CAACS,cAAc,EAAET,MAAM,CAACU,MAAM,CAAC,CAAC;IAErInB,GAAW,CAACoB,SAAS,CAAC;MACrBC,IAAI,EAAE,CAACf,OAAO,CAAC;MACfgB,IAAI,EAAEf,UAAU;MAChBgB,MAAM,EAAE;KACT,CAAC;IAEFvB,GAAG,CAACwB,IAAI,CAAC,GAAG1B,UAAU,aAAa,CAAC;EACtC;EAAC;qBAhCUP,aAAa;EAAA;EAAA;WAAbA,aAAa;IAAAkC,SAAblC,aAAa;IAAAmC,YAFZ;EAAM","names":["jsPDF","ReportService","constructor","http","getOccupancyReport","get","getPaymentReport","generatePDFReport","reportType","data","doc","title","charAt","toUpperCase","slice","text","headers","reportData","map","report","id","room_number","occupant_name","occupancy_date","payment_id","booking_id","amount","payment_date","payment_method","status","autoTable","head","body","startY","save","factory","providedIn"],"sourceRoot":"","sources":["D:\\github\\pg-admin\\src\\app\\services\\reports\\reports.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ReportService {\n  constructor(private http: HttpClient) {}\n\n  getOccupancyReport() {\n    return this.http.get<any[]>('/api/reports/occupancy');\n  }\n\n  getPaymentReport() {\n    return this.http.get<any[]>('/api/reports/payment');\n  }\n\n  generatePDFReport(reportType: string, data: any[]) {\n    const doc = new jsPDF();\n    const title = `${reportType.charAt(0).toUpperCase() + reportType.slice(1)} Report`;\n\n    doc.text(title, 20, 10);\n\n    const headers = reportType === 'occupancy' ?\n      ['ID', 'Room Number', 'Occupant Name', 'Occupancy Date'] :\n      ['ID', 'Booking ID', 'Amount', 'Payment Date', 'Method', 'Status'];\n\n    const reportData = reportType === 'occupancy' ?\n      data.map(report => [report.id, report.room_number, report.occupant_name, report.occupancy_date]) :\n      data.map(report => [report.payment_id, report.booking_id, report.amount, report.payment_date, report.payment_method, report.status]);\n\n    (doc as any).autoTable({\n      head: [headers],\n      body: reportData,\n      startY: 20\n    });\n\n    doc.save(`${reportType}-report.pdf`);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}