{"ast":null,"code":"\"use strict\";\n\nconst db = require('../config/db');\n// Fetch occupancy reports\nexports.getOccupancyReport = (req, res) => {\n  const query = `\n       SELECT r.room_number, pu.full_name AS occupant_name, b.start_date AS occupancy_date\n       FROM bookings b\n       JOIN rooms r ON b.room_id = r.room_id\n       JOIN pg_users pu ON b.booking_id = pu.booking_id\n       WHERE b.status = 'booked';`;\n  db.query(query, (err, results) => {\n    if (err) {\n      console.error('Error fetching occupancy report:', err);\n      return res.status(500).send(err);\n    }\n    console.log('Occupancy report results:', results); // Add this line\n    res.status(200).send(results);\n  });\n};\n// Fetch payment reports\nexports.getPaymentReport = (req, res) => {\n  const query = `\n        SELECT p.payment_id, b.booking_id, p.amount, p.payment_date, p.payment_method, p.status\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.booking_id;`;\n  db.query(query, (err, results) => {\n    if (err) {\n      console.error('Error fetching payment report:', err);\n      return res.status(500).send(err);\n    }\n    console.log('Payment report results:', results); // Add this line\n    res.status(200).send(results);\n  });\n};","map":{"version":3,"mappings":";;AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,cAAc,CAAC;AAElC;AACAC,OAAO,CAACC,kBAAkB,GAAG,CAACC,GAAG,EAAEC,GAAG,KAAI;EACtC,MAAMC,KAAK,GAAG;;;;;kCAKgB;EAE9BN,EAAE,CAACM,KAAK,CAACA,KAAK,EAAE,CAACC,GAAG,EAAEC,OAAO,KAAI;IAC7B,IAAID,GAAG,EAAE;MACLE,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEH,GAAG,CAAC;MACtD,OAAOF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACL,GAAG,CAAC;;IAEpCE,OAAO,CAACI,GAAG,CAAC,2BAA2B,EAAEL,OAAO,CAAC,CAAC,CAAC;IACnDH,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,OAAO,CAAC;EACjC,CAAC,CAAC;AACN,CAAC;AAED;AACAN,OAAO,CAACY,gBAAgB,GAAG,CAACV,GAAG,EAAEC,GAAG,KAAI;EACpC,MAAMC,KAAK,GAAG;;;wDAGsC;EAEpDN,EAAE,CAACM,KAAK,CAACA,KAAK,EAAE,CAACC,GAAG,EAAEC,OAAO,KAAI;IAC7B,IAAID,GAAG,EAAE;MACLE,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEH,GAAG,CAAC;MACpD,OAAOF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACL,GAAG,CAAC;;IAEpCE,OAAO,CAACI,GAAG,CAAC,yBAAyB,EAAEL,OAAO,CAAC,CAAC,CAAC;IACjDH,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,OAAO,CAAC;EACjC,CAAC,CAAC;AACN,CAAC","names":["db","require","exports","getOccupancyReport","req","res","query","err","results","console","error","status","send","log","getPaymentReport"],"sourceRoot":"","sources":["D:\\github\\pg-admin\\src\\app\\pages\\reports\\reports.component.ts"],"sourcesContent":["const db = require('../config/db');\n\n// Fetch occupancy reports\nexports.getOccupancyReport = (req, res) => {\n    const query = `\n       SELECT r.room_number, pu.full_name AS occupant_name, b.start_date AS occupancy_date\n       FROM bookings b\n       JOIN rooms r ON b.room_id = r.room_id\n       JOIN pg_users pu ON b.booking_id = pu.booking_id\n       WHERE b.status = 'booked';`;\n\n    db.query(query, (err, results) => {\n        if (err) {\n            console.error('Error fetching occupancy report:', err);\n            return res.status(500).send(err);\n        }\n        console.log('Occupancy report results:', results); // Add this line\n        res.status(200).send(results);\n    });\n};\n\n// Fetch payment reports\nexports.getPaymentReport = (req, res) => {\n    const query = `\n        SELECT p.payment_id, b.booking_id, p.amount, p.payment_date, p.payment_method, p.status\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.booking_id;`;\n\n    db.query(query, (err, results) => {\n        if (err) {\n            console.error('Error fetching payment report:', err);\n            return res.status(500).send(err);\n        }\n        console.log('Payment report results:', results); // Add this line\n        res.status(200).send(results);\n    });\n};\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}